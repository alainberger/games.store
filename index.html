<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>HyperVoice — Clonage à partir de vidéo/audio</title>
<link rel="manifest" href="/manifest.json"/>
<link rel="stylesheet" href="/styles.css"/>
</head>
<body>
<header>
  <div class="logo"></div><h1>HyperVoice</h1>
  <nav>
    <a href="#video" id="tVideo" class="active">Vidéo→Clone</a>
    <a href="#clone" id="tClone">Audio→Clone</a>
    <a href="#tts" id="tTTS">TTS</a>
    <a href="#convert" id="tConvert">Conversion</a>
    <a href="#library" id="tLib">Bibliothèque</a>
  </nav>
</header>
<main>
  <section id="view-video" class="card">
    <h2>Créer un clone directement depuis une <b>vidéo</b></h2>
    <div class="consents">
      <input type="checkbox" id="consentV"/>
      <label for="consentV">Je confirme le <b>consentement</b> explicite du locuteur et l’usage personnel.</label>
    </div>
    <div class="row">
      <div class="col">
        <label>Nom du clone</label>
        <input type="text" id="vName" placeholder="Ma voix (vidéo)"/>
        <label style="margin-top:8px">Fichier vidéo (mp4/mov/webm…)</label>
        <input type="file" id="vidFile" accept="video/*"/>
        <div class="drop" id="vidDrop">ou glisse ta vidéo ici</div>
        <button class="primary" id="btnVidEnroll">Extraire l’audio & créer le clone</button>
        <div class="small" id="vidMsg"></div>
      </div>
      <div class="col">
        <label>Aperçu vidéo</label>
        <video id="vidPreview" controls></video>
        <label>Aperçu audio extrait</label>
        <audio id="audPreview" controls></audio>
      </div>
    </div>
  </section>

  <section id="view-clone" class="card" style="display:none">
    <h2>Clonage à partir d’un <b>audio</b></h2>
    <div class="consents">
      <input type="checkbox" id="consent"/>
      <label for="consent">Je confirme le <b>consentement</b> explicite du locuteur et l’usage personnel.</label>
    </div>
    <div class="row">
      <div class="col">
        <label>Nom du clone</label>
        <input type="text" id="voiceName" placeholder="Ma voix"/>
        <div style="height:8px"></div>
        <button id="btnRec">● Enregistrer</button>
        <button id="btnStop" disabled>■ Stop</button>
        <div class="small">Ou sélectionne un fichier audio :</div>
        <input type="file" id="audFile" accept="audio/*"/>
      </div>
      <div class="col">
        <label>Aperçu</label>
        <audio id="preview" controls></audio>
        <div style="height:8px"></div>
        <button class="primary" id="btnEnroll">Créer le clone</button>
        <div class="small" id="enrollMsg"></div>
      </div>
    </div>
  </section>

  <section id="view-tts" class="card" style="display:none">
    <h2>Texte → Voix (démo locale)</h2>
    <div class="row">
      <div class="col">
        <label>Texte</label>
        <textarea id="ttsText" placeholder="Tape ton texte..."></textarea>
      </div>
      <div class="col">
        <label>Voix</label>
        <select id="voiceSelect"></select>
        <div class="row">
          <div class="col"><label>Vitesse</label><input type="range" id="rate" min="0.7" max="1.3" step="0.05" value="1"/></div>
          <div class="col"><label>Pitch (démo)</label><input type="range" id="pitch" min="-6" max="6" step="1" value="0"/></div>
        </div>
        <button class="primary" id="btnSpeak">Générer (démo navigateur)</button>
        <div class="small">Pour un TTS cloné serveur, configure une API vendor dans <code>.env</code>.</div>
        <audio id="ttsAudio" controls></audio>
      </div>
    </div>
  </section>

  <section id="view-convert" class="card" style="display:none">
    <h2>Conversion de voix (pitch) — local</h2>
    <div class="row">
      <div class="col">
        <label>Audio source</label>
        <input type="file" id="convFile" accept="audio/*"/>
      </div>
      <div class="col">
        <label>Transpose (demi-tons)</label>
        <input type="range" id="convPitch" min="-8" max="8" step="1" value="0"/>
        <button id="btnConvert" class="primary">Convertir (serveur)</button>
        <audio id="convOut" controls></audio>
      </div>
    </div>
  </section>

  <section id="view-library" class="card" style="display:none">
    <h2>Bibliothèque de voix</h2>
    <div id="lib"></div>
  </section>
  <footer>HyperVoice (PWA, offline-first). <span class="badge">Usage personnel</span></footer>
</main>

<script src="/app.js"></script>
<script>if('serviceWorker' in navigator){navigator.serviceWorker.register('/sw.js');}</script>
</body>
</html>
